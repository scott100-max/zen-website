<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gym Tracker â€” Salus</title>
  <meta name="description" content="Track your PureGym visits, workout activities, daily steps and fitness metrics with Salus.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <style>
    .gym-page { padding-top: 140px; padding-bottom: 80px; }

    /* Stats row */
    .stats-row { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 48px; }
    .stat-card {
      background: var(--white); border: 1px solid var(--light-gray); border-radius: 12px;
      padding: 24px; text-align: center;
      transition: transform var(--transition), box-shadow var(--transition);
    }
    .stat-card:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,0.06); }
    .stat-value { font-size: 2rem; font-weight: 700; color: var(--accent-dark); }
    .stat-label { font-size: 0.85rem; color: var(--mid-gray); margin-top: 4px; }

    /* Panels */
    .gym-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 32px; margin-bottom: 48px; }
    .panel {
      background: var(--white); border: 1px solid var(--light-gray); border-radius: 12px; padding: 32px;
    }
    .panel h3 { font-size: 1.2rem; margin-bottom: 20px; }

    /* Form elements */
    .gym-form .field { margin-bottom: 16px; }
    .gym-form label { display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 6px; color: var(--dark); }
    .gym-form input, .gym-form textarea, .gym-form select {
      width: 100%; padding: 12px 14px; border-radius: 8px; border: 1px solid var(--light-gray);
      font-size: 0.95rem; font-family: var(--font-body); background: var(--white);
      transition: border-color var(--transition);
    }
    .gym-form input:focus, .gym-form textarea:focus { outline: none; border-color: var(--accent); }
    .gym-form textarea { resize: vertical; min-height: 80px; }
    .gym-form .btn { width: 100%; margin-top: 8px; }

    /* Visit log table */
    .visit-log { width: 100%; }
    .visit-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
    .visit-table th {
      text-align: left; padding: 10px 12px; border-bottom: 2px solid var(--light-gray);
      font-weight: 600; color: var(--mid-gray); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.5px;
    }
    .visit-table td { padding: 12px; border-bottom: 1px solid var(--light-gray); vertical-align: top; }
    .visit-table tr:hover td { background: var(--off-white); }
    .visit-notes { font-size: 0.85rem; color: var(--mid-gray); margin-top: 4px; }
    .visit-delete {
      background: none; border: none; color: var(--mid-gray); cursor: pointer; font-size: 0.85rem; padding: 2px 8px;
      border-radius: 4px; transition: all var(--transition);
    }
    .visit-delete:hover { color: #c0392b; background: #fdecea; }

    /* Fitness log */
    .fitness-form .field { margin-bottom: 16px; }
    .fitness-form label { display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 6px; color: var(--dark); }
    .fitness-form input {
      width: 100%; padding: 12px 14px; border-radius: 8px; border: 1px solid var(--light-gray);
      font-size: 0.95rem; font-family: var(--font-body); background: var(--white);
      transition: border-color var(--transition);
    }
    .fitness-form input:focus { outline: none; border-color: var(--accent); }
    .fitness-form .btn { width: 100%; margin-top: 8px; }

    .fitness-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin-top: 20px; }
    .fitness-table th {
      text-align: left; padding: 10px 12px; border-bottom: 2px solid var(--light-gray);
      font-weight: 600; color: var(--mid-gray); font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.5px;
    }
    .fitness-table td { padding: 12px; border-bottom: 1px solid var(--light-gray); }
    .fitness-table tr:hover td { background: var(--off-white); }

    .empty-state { text-align: center; padding: 40px 20px; color: var(--mid-gray); font-size: 0.95rem; }

    .clear-btn {
      background: none; border: 1px solid var(--light-gray); color: var(--mid-gray); padding: 6px 14px;
      border-radius: 50px; font-size: 0.8rem; cursor: pointer; transition: all var(--transition);
      float: right;
    }
    .clear-btn:hover { border-color: #c0392b; color: #c0392b; }

    /* Responsive */
    @media (max-width: 768px) {
      .stats-row { grid-template-columns: repeat(2, 1fr); }
      .gym-grid { grid-template-columns: 1fr; }
      .visit-table, .fitness-table { font-size: 0.8rem; }
      .visit-table th, .visit-table td, .fitness-table th, .fitness-table td { padding: 8px; }
    }
  </style>
</head>
<body>

  <div class="promo-banner">Track your PureGym visits <a href="#log-visit">Log a Visit</a></div>

  <!-- Nav -->
  <nav class="nav" style="position:relative;">
    <div class="container">
      <a href="index.html" class="nav-logo"><img src="Salus.PNG" alt="Salus" class="nav-icon" style="height:64px;border-radius:10px;margin-right:12px;"><span style="font-family:'Cormorant Garamond',serif;font-size:2rem;">SALUS</span></a>
      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="sessions.html">Sessions</a></li>
        <li><a href="soundscapes.html">Soundscapes</a></li>
        <li><a href="education.html">Learn</a></li>
        <li><a href="gym.html" class="active">Gym</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="apps.html">Apps</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <button class="nav-toggle" aria-label="Toggle menu">&#9776;</button>
    </div>
  </nav>

  <!-- Hero -->
  <section class="gym-page">
    <div class="container">
      <div class="section-header">
        <h2 class="fade-in" style="font-family:'Cormorant Garamond',serif;font-size:2.8rem;">Gym Tracker</h2>
        <p class="fade-in">Log your PureGym visits, track workouts, and monitor your daily fitness.</p>
      </div>

      <!-- Stats Overview -->
      <div class="stats-row fade-in">
        <div class="stat-card">
          <div class="stat-value" id="statTotalVisits">0</div>
          <div class="stat-label">Total Visits</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statThisMonth">0</div>
          <div class="stat-label">This Month</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statTotalHours">0</div>
          <div class="stat-label">Total Hours</div>
        </div>
        <div class="stat-card">
          <div class="stat-value" id="statAvgDuration">0</div>
          <div class="stat-label">Avg Min/Visit</div>
        </div>
      </div>

      <!-- Log Visit + Visit History -->
      <div class="gym-grid">
        <div class="panel" id="log-visit">
          <h3>Log a Gym Visit</h3>
          <form class="gym-form" id="visitForm">
            <div class="field">
              <label for="visitDate">Date</label>
              <input type="date" id="visitDate" required>
            </div>
            <div class="field">
              <label for="visitDuration">Duration (minutes)</label>
              <input type="number" id="visitDuration" min="1" max="600" placeholder="e.g. 60" required>
            </div>
            <div class="field">
              <label for="visitType">Workout Type</label>
              <select id="visitType">
                <option value="General">General</option>
                <option value="Weights">Weights</option>
                <option value="Cardio">Cardio</option>
                <option value="Classes">Classes</option>
                <option value="Swimming">Swimming</option>
                <option value="HIIT">HIIT</option>
                <option value="Yoga">Yoga</option>
                <option value="Other">Other</option>
              </select>
            </div>
            <div class="field">
              <label for="visitNotes">Notes (optional)</label>
              <textarea id="visitNotes" placeholder="e.g. Chest & triceps, 5x5 bench press, 20 min treadmill..."></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Log Visit</button>
          </form>
        </div>

        <div class="panel">
          <h3>Visit History <button class="clear-btn" id="clearVisits">Clear All</button></h3>
          <div class="visit-log" id="visitLog">
            <div class="empty-state">No visits logged yet. Start tracking your gym sessions.</div>
          </div>
        </div>
      </div>

      <!-- General Fitness Tracking -->
      <div class="gym-grid">
        <div class="panel">
          <h3>Log Daily Fitness</h3>
          <form class="fitness-form" id="fitnessForm">
            <div class="field">
              <label for="fitnessDate">Date</label>
              <input type="date" id="fitnessDate" required>
            </div>
            <div class="field">
              <label for="fitnessSteps">Steps</label>
              <input type="number" id="fitnessSteps" min="0" placeholder="e.g. 10000">
            </div>
            <div class="field">
              <label for="fitnessCalories">Calories Burned</label>
              <input type="number" id="fitnessCalories" min="0" placeholder="e.g. 500">
            </div>
            <div class="field">
              <label for="fitnessWater">Water (glasses)</label>
              <input type="number" id="fitnessWater" min="0" max="30" placeholder="e.g. 8">
            </div>
            <div class="field">
              <label for="fitnessSleep">Sleep (hours)</label>
              <input type="number" id="fitnessSleep" min="0" max="24" step="0.5" placeholder="e.g. 7.5">
            </div>
            <div class="field">
              <label for="fitnessWeight">Weight (kg)</label>
              <input type="number" id="fitnessWeight" min="0" max="500" step="0.1" placeholder="e.g. 75.5">
            </div>
            <button type="submit" class="btn btn-primary">Log Fitness</button>
          </form>
        </div>

        <div class="panel">
          <h3>Fitness Log <button class="clear-btn" id="clearFitness">Clear All</button></h3>
          <div id="fitnessLog">
            <div class="empty-state">No fitness data logged yet. Track your daily activity.</div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-grid">
        <div>
          <h4 style="letter-spacing:2px;">SALUS</h4>
          <p>SLEEP &middot; RELAX &middot; RESTORE</p>
          <p style="margin-top:8px;">Meditation and mindfulness for everyday life.</p>
        </div>
        <div>
          <h4>Pages</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="sessions.html">Sessions</a></li>
            <li><a href="soundscapes.html">Soundscapes</a></li>
            <li><a href="education.html">Learn</a></li>
            <li><a href="gym.html">Gym</a></li>
            <li><a href="about.html">About</a></li>
          </ul>
        </div>
        <div>
          <h4>Support</h4>
          <ul>
            <li><a href="contact.html">Contact</a></li>
            <li><a href="faq.html">FAQ</a></li>
            <li><a href="privacy.html">Privacy</a></li>
            <li><a href="terms.html">Terms</a></li>
          </ul>
        </div>
        <div>
          <h4>Tools</h4>
          <ul>
            <li><a href="breathe.html">Breathing Timer</a></li>
            <li><a href="timer.html">Meditation Timer</a></li>
            <li><a href="sounds.html">Sleep Sounds</a></li>
          </ul>
          <h4 style="margin-top:24px;">Newsletter</h4>
          <form class="newsletter-form" onsubmit="this.querySelector('button').textContent='Subscribed!';return false;">
            <input type="email" placeholder="Your email" required>
            <button type="submit">Join</button>
          </form>
        </div>
      </div>
      <div class="footer-bottom">
        &copy; 2026 Salus. All rights reserved.
      </div>
    </div>
  </footer>

  <script src="js/main.js"></script>
  <script>
  (function() {
    'use strict';

    // ========== API-Ready Data Layer ==========
    // All data access goes through GymAPI. Currently backed by localStorage.
    // Replace the method bodies with fetch() calls when the real API is ready.

    var GymAPI = {
      // --- Visits ---
      getVisits: function() {
        return JSON.parse(localStorage.getItem('salus_gym_visits') || '[]');
      },
      saveVisit: function(visit) {
        var visits = this.getVisits();
        visit.id = Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
        visits.unshift(visit);
        localStorage.setItem('salus_gym_visits', JSON.stringify(visits));
        return visit;
      },
      deleteVisit: function(id) {
        var visits = this.getVisits().filter(function(v) { return v.id !== id; });
        localStorage.setItem('salus_gym_visits', JSON.stringify(visits));
      },
      clearVisits: function() {
        localStorage.removeItem('salus_gym_visits');
      },

      // --- Fitness ---
      getFitness: function() {
        return JSON.parse(localStorage.getItem('salus_gym_fitness') || '[]');
      },
      saveFitness: function(entry) {
        var entries = this.getFitness();
        entry.id = Date.now().toString(36) + Math.random().toString(36).slice(2, 7);
        entries.unshift(entry);
        localStorage.setItem('salus_gym_fitness', JSON.stringify(entries));
        return entry;
      },
      deleteFitness: function(id) {
        var entries = this.getFitness().filter(function(e) { return e.id !== id; });
        localStorage.setItem('salus_gym_fitness', JSON.stringify(entries));
      },
      clearFitness: function() {
        localStorage.removeItem('salus_gym_fitness');
      }
    };

    // ========== Stats ==========
    function updateStats() {
      var visits = GymAPI.getVisits();
      var now = new Date();
      var thisMonth = visits.filter(function(v) {
        var d = new Date(v.date);
        return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear();
      });
      var totalMin = visits.reduce(function(sum, v) { return sum + (parseInt(v.duration) || 0); }, 0);

      document.getElementById('statTotalVisits').textContent = visits.length;
      document.getElementById('statThisMonth').textContent = thisMonth.length;
      document.getElementById('statTotalHours').textContent = (totalMin / 60).toFixed(1);
      document.getElementById('statAvgDuration').textContent = visits.length ? Math.round(totalMin / visits.length) : 0;
    }

    // ========== Render Visits ==========
    function renderVisits() {
      var visits = GymAPI.getVisits();
      var container = document.getElementById('visitLog');

      if (!visits.length) {
        container.innerHTML = '<div class="empty-state">No visits logged yet. Start tracking your gym sessions.</div>';
        return;
      }

      var html = '<table class="visit-table"><thead><tr><th>Date</th><th>Duration</th><th>Type</th><th>Notes</th><th></th></tr></thead><tbody>';
      visits.forEach(function(v) {
        var dateStr = new Date(v.date + 'T00:00:00').toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
        var notes = v.notes ? '<div class="visit-notes">' + escapeHtml(v.notes) + '</div>' : '';
        html += '<tr>'
          + '<td>' + dateStr + '</td>'
          + '<td>' + v.duration + ' min</td>'
          + '<td>' + escapeHtml(v.type) + '</td>'
          + '<td>' + notes + '</td>'
          + '<td><button class="visit-delete" data-id="' + v.id + '">Remove</button></td>'
          + '</tr>';
      });
      html += '</tbody></table>';
      container.innerHTML = html;
    }

    // ========== Render Fitness ==========
    function renderFitness() {
      var entries = GymAPI.getFitness();
      var container = document.getElementById('fitnessLog');

      if (!entries.length) {
        container.innerHTML = '<div class="empty-state">No fitness data logged yet. Track your daily activity.</div>';
        return;
      }

      var html = '<table class="fitness-table"><thead><tr><th>Date</th><th>Steps</th><th>Cals</th><th>Water</th><th>Sleep</th><th>Weight</th><th></th></tr></thead><tbody>';
      entries.forEach(function(e) {
        var dateStr = new Date(e.date + 'T00:00:00').toLocaleDateString('en-GB', { day: 'numeric', month: 'short', year: 'numeric' });
        html += '<tr>'
          + '<td>' + dateStr + '</td>'
          + '<td>' + (e.steps || '-') + '</td>'
          + '<td>' + (e.calories || '-') + '</td>'
          + '<td>' + (e.water ? e.water + 'g' : '-') + '</td>'
          + '<td>' + (e.sleep ? e.sleep + 'h' : '-') + '</td>'
          + '<td>' + (e.weight ? e.weight + 'kg' : '-') + '</td>'
          + '<td><button class="visit-delete" data-fitness-id="' + e.id + '">Remove</button></td>'
          + '</tr>';
      });
      html += '</tbody></table>';
      container.innerHTML = html;
    }

    function escapeHtml(str) {
      var div = document.createElement('div');
      div.appendChild(document.createTextNode(str));
      return div.innerHTML;
    }

    // ========== Event Handlers ==========

    // Log visit
    document.getElementById('visitForm').addEventListener('submit', function(e) {
      e.preventDefault();
      GymAPI.saveVisit({
        date: document.getElementById('visitDate').value,
        duration: document.getElementById('visitDuration').value,
        type: document.getElementById('visitType').value,
        notes: document.getElementById('visitNotes').value.trim()
      });
      this.reset();
      document.getElementById('visitDate').value = new Date().toISOString().split('T')[0];
      renderVisits();
      updateStats();
    });

    // Log fitness
    document.getElementById('fitnessForm').addEventListener('submit', function(e) {
      e.preventDefault();
      GymAPI.saveFitness({
        date: document.getElementById('fitnessDate').value,
        steps: document.getElementById('fitnessSteps').value || null,
        calories: document.getElementById('fitnessCalories').value || null,
        water: document.getElementById('fitnessWater').value || null,
        sleep: document.getElementById('fitnessSleep').value || null,
        weight: document.getElementById('fitnessWeight').value || null
      });
      this.reset();
      document.getElementById('fitnessDate').value = new Date().toISOString().split('T')[0];
      renderFitness();
    });

    // Delete visit (delegated)
    document.getElementById('visitLog').addEventListener('click', function(e) {
      if (e.target.dataset.id) {
        GymAPI.deleteVisit(e.target.dataset.id);
        renderVisits();
        updateStats();
      }
    });

    // Delete fitness (delegated)
    document.getElementById('fitnessLog').addEventListener('click', function(e) {
      if (e.target.dataset.fitnessId) {
        GymAPI.deleteFitness(e.target.dataset.fitnessId);
        renderFitness();
      }
    });

    // Clear all
    document.getElementById('clearVisits').addEventListener('click', function() {
      if (confirm('Clear all visit history?')) {
        GymAPI.clearVisits();
        renderVisits();
        updateStats();
      }
    });

    document.getElementById('clearFitness').addEventListener('click', function() {
      if (confirm('Clear all fitness data?')) {
        GymAPI.clearFitness();
        renderFitness();
      }
    });

    // ========== Init ==========
    document.getElementById('visitDate').value = new Date().toISOString().split('T')[0];
    document.getElementById('fitnessDate').value = new Date().toISOString().split('T')[0];
    renderVisits();
    renderFitness();
    updateStats();

  })();
  </script>
</body>
</html>
